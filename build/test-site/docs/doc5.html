<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Using Mocha and Chai · PlaywrightJS Tutorial</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Mocha and Chai are two libraries that gives detailed reports, including execution time, item descriptions, and better test documentation. It is usually used with Chai, an assertion library, which enhances the basic NodeJS assert library."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Using Mocha and Chai · PlaywrightJS Tutorial"/><meta property="og:type" content="website"/><meta property="og:url" content="https://www,google.com/"/><meta property="og:description" content="Mocha and Chai are two libraries that gives detailed reports, including execution time, item descriptions, and better test documentation. It is usually used with Chai, an assertion library, which enhances the basic NodeJS assert library."/><meta property="og:image" content="https://www,google.com/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://www,google.com/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/favicon.ico" alt="PlaywrightJS Tutorial"/><h2 class="headerTitleWithLogo">PlaywrightJS Tutorial</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/doc1" target="_self">Docs</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>First Steps</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Setup</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/doc1">PlaywrightJS Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/doc2">Install Mocha and Chai</a></li><li class="navListItem"><a class="navItem" href="/docs/doc3">Installation Test</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">First Steps</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/doc4">Create a PlaywrightJS Test</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/doc5">Using Mocha and Chai</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">The Playwright Library</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/doc6">The Browser Object</a></li><li class="navListItem"><a class="navItem" href="/docs/doc7">Selectors</a></li><li class="navListItem"><a class="navItem" href="/docs/doc71">Navigation</a></li><li class="navListItem"><a class="navItem" href="/docs/doc8">Interactions</a></li><li class="navListItem"><a class="navItem" href="/docs/doc81">Auditing</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Using PlayWright on web pages</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/doc9">A real world case</a></li><li class="navListItem"><a class="navItem" href="/docs/doc91">An answer</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Code Generation</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/doc10">Code Generation</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Using Mocha and Chai</h1></header><article><div><span><p>Mocha and Chai are two libraries that gives detailed reports, including execution time, item descriptions, and better test documentation. It is usually used with Chai, an assertion library, which enhances the basic NodeJS assert library.</p>
<h2><a class="anchor" aria-hidden="true" id="create-new-test-file"></a><a href="#create-new-test-file" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create new test file</h2>
<p>Create and save test3.js in an editor with the following code:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> pw = <span class="hljs-built_in">require</span>(<span class="hljs-string">'playwright'</span>)
<span class="hljs-keyword">const</span> chai = <span class="hljs-built_in">require</span>(<span class="hljs-string">'chai'</span>)
<span class="hljs-keyword">const</span> expect = chai.expect

<span class="hljs-keyword">let</span> page, browser, context;

describe(<span class="hljs-string">'Selenium Playground Test'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.timeout(<span class="hljs-number">30000</span>);
   
    before(<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        browser = <span class="hljs-keyword">await</span> pw.chromium.launch();
        context = <span class="hljs-keyword">await</span> browser.newContext();
     page = <span class="hljs-keyword">await</span> context.newPage(<span class="hljs-string">'http://leafground.com/'</span>)
    })

    after(<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">await</span> page.close();
        <span class="hljs-keyword">await</span> context.close();
        <span class="hljs-keyword">await</span> browser.close();
    })

    it(<span class="hljs-string">'Checks the title of the page'</span>, <span class="hljs-keyword">async</span>() =&gt; {
        <span class="hljs-keyword">await</span> page.goto(<span class="hljs-string">'http://leafground.com/'</span>);
        <span class="hljs-keyword">const</span> title = <span class="hljs-keyword">await</span> page.title();
        expect(title).to.equal(<span class="hljs-string">'TestLeaf - Selenium Playground'</span>)
    })
    it(<span class="hljs-string">'Checks the html title of the page'</span>, <span class="hljs-keyword">async</span>() =&gt; {
        <span class="hljs-keyword">const</span> title = <span class="hljs-keyword">await</span> page.$(<span class="hljs-string">'.wp-heading'</span>)
        <span class="hljs-keyword">let</span> titleText = <span class="hljs-keyword">await</span> title.textContent()
        expect(titleText).to.match(<span class="hljs-regexp">/Locators and Selenium Interactions/g</span>)
    })
})
</code></pre>
<p>This code uses Mocha and Chai libraries, and its usage is explained</p>
<ul>
<li>Mocha expects a <strong>describe</strong> function that encapsulates each test suite.</li>
<li>Describe has a timeout property, which defines the maximum time for each test to finish. If exceeded, the test will fail with a timeout assertion error.</li>
<li>There are a <strong>before</strong> and <strong>after</strong> callbacks, which are special functions that called before and after all tests are processed, The before callback is used to initialize variables, start process, connect to databases; and the after callback is used to end the browser, context and page instances.</li>
<li>“It” functions, which test an individual functionality of the suite, and the Chai assertion, which gives additional assertion functions such as regular expression matching</li>
</ul>
<p>This test also introduces the concept of selectors: this are functions that select one or many elements from the DOM, according to a filter function (in this case, a CSS). Playwright works by selecting DOM elements and then interacting with them. For this case, it gets the containing text from an HTML header, and getting its text content to compare with an expected value.</p>
<p>The test can be tried by executing the mocha command</p>
<pre><code class="hljs"><span class="hljs-selector-tag">playwright_test</span> &gt; <span class="hljs-selector-tag">mocha</span> <span class="hljs-selector-tag">filename</span><span class="hljs-selector-class">.js</span>
</code></pre>
<p>Once executed, the test shows a formatted result:</p>
<pre><code class="hljs">Selenium Playground Test
    √ Checks the title of the<span class="hljs-built_in"> page </span>(3535ms)
    √ Checks the html title of the<span class="hljs-built_in"> page
</span>
2 passing (4s)
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/doc4"><span class="arrow-prev">← </span><span class="function-name-prevnext">Create a PlaywrightJS Test</span></a><a class="docs-next button" href="/docs/doc6"><span>The Browser Object</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#create-new-test-file">Create new test file</a></li></ul></nav></div><footer class="nav-footer" id="footer"></footer></div></body></html>